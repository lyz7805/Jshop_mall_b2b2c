(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-payment-auth"],{4657:function(t,e,a){"use strict";a.r(e);var i=a("a84f"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"5b2a":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"content-c"},[a("v-uni-image",{staticClass:"load-img",attrs:{src:"/static/image/loading.gif",mode:""}}),a("v-uni-view",{staticClass:"load-text color-9"},[t._v("信息加载中.....")])],1)],1)},o=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}))},a84f:function(t,e,a){"use strict";a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{type:"",openid:"",orderId:"",state:""}},onLoad:function(t){this.orderId=t.order_id,this.money=Number(t.money),this.type=Number(t.type),this.uid=Number(t.uid),this.state=this.$common.getQueryString("state"),this.getCode()},methods:{getCode:function(){var t=this.$common.getQueryString("code");t&&this.getOpenId(t)},getOpenId:function(t){var e=this,a={code:t,scope:2,state:this.state};this.$api.getOpenId(a,(function(t){t.status?(e.openid=t.data.openid,e.toPayHandler("wechatpay")):e.$common.errorToShow(t.msg)}))},checkWXJSBridge:function(t){var e=this,a=setInterval((function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(a),e.onBridgeReady(t))}),200)},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},(function(a){"get_brand_wcpay_request:ok"===a.err_msg?e.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===a.err_msg?e.$common.errorToShow("取消支付"):e.$common.errorToShow("支付失败"),setTimeout((function(){e.$common.redirectTo("/pages/goods/payment/result?id="+t.payment_id)}),1e3)}))},toPayHandler:function(t){var e=this,a={payment_code:t,payment_type:this.type};a["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,1==this.type&&this.orderId?this.openid&&(a["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid}):2==this.type&&this.money?this.openid&&(a["params"]={trade_type:"JSAPI_OFFICIAL",money:this.money,openid:this.openid}):5!=this.type&&6!=this.type||!this.orderId||this.openid&&(a["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid,formid:this.orderId}),this.$api.pay(a,(function(t){if(t.status){var a=t.data;e.checkWXJSBridge(a)}else e.$common.errorToShow(t.msg)}))}}};e.default=i},a9d5:function(t,e,a){"use strict";a.r(e);var i=a("5b2a"),n=a("4657");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("e3bc");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"7ab1d8ad",null,!1,i["a"],r);e["default"]=d.exports},afa8:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".content[data-v-7ab1d8ad]{position:relative;height:80vh}.content-c[data-v-7ab1d8ad]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center}.load-img[data-v-7ab1d8ad]{width:%?100?%;height:%?100?%}.load-text[data-v-7ab1d8ad]{font-size:%?26?%}",""]),t.exports=e},e3bc:function(t,e,a){"use strict";var i=a("e455a"),n=a.n(i);n.a},e455a:function(t,e,a){var i=a("afa8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("a6acfa32",i,!0,{sourceMap:!1,shadowMode:!1})}}]);