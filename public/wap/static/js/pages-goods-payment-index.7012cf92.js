(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-payment-index"],{"0411":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".payment-method .cell-item-hd[data-v-28783a64]{min-width:%?70?%}.payment-method .cell-hd-icon[data-v-28783a64]{width:%?70?%;height:%?70?%}.payment-method .cell-item-bd[data-v-28783a64]{border-left:%?2?% solid #f0f0f0;padding-left:%?30?%}.payment-method .cell-bd-text[data-v-28783a64]{font-size:%?28?%;color:#666}.payment-method .address[data-v-28783a64]{font-size:%?24?%;color:#999}.payment-pop[data-v-28783a64]{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?400?%;height:%?272?%;background-color:#fff;text-align:center;-webkit-box-shadow:0 0 %?20?% #ccc;box-shadow:0 0 %?20?% #ccc\n\t/* border-radius: 10rpx; */}.payment-pop-c[data-v-28783a64]{padding:%?50?% %?30?%;\n\t/* line-height: 300rpx; */font-size:%?32?%;color:#999}.payment-pop-b[data-v-28783a64]{position:absolute;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.payment-pop-b .btn[data-v-28783a64]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.payment-pop .text[data-v-28783a64]{font-size:%?24?%}",""]),e.exports=t},1460:function(e,t,i){var a=i("0411");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("369e5eb8",a,!0,{sourceMap:!1,shadowMode:!1})},"19d5":function(e,t,i){"use strict";i("c975"),i("b64b"),i("ac1f"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.subscription=t.clickUrl=t.tools=t.checkLogin=t.jumpBackPage=t.goBack=t.goods=t.orders=void 0;var a={mounted:function(){},methods:{orderDetail:function(e){this.$common.navigateTo("/pages/member/order/orderdetail?order_id="+e)},toPay:function(e){this.$common.navigateTo("/pages/goods/payment/index?order_id="+e+"&type=1")},toEvaluate:function(e){this.$common.navigateTo("/pages/member/order/evaluate?order_id="+e)},showExpress:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=encodeURIComponent("code="+e+"&no="+t+"&add="+i);this.$common.navigateTo("/pages/member/order/express_delivery?params="+a)}}};t.orders=a;var n={mounted:function(){},methods:{goodsDetail:function(e){this.$common.navigateTo("/pages/goods/index/index?id="+e)},goodsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/pages/classify/index";Object.keys(e).length&&(t=this.$common.builderUrlParams(t,e)),this.$common.navigateTo(t)},groupDetail:function(e,t){this.$common.navigateTo("/pages/goods/index/group?id="+e+"&group_id="+t)},pintuanDetail:function(e,t){t?this.$common.navigateTo("/pages/goods/index/pintuan?id="+e+"&team_id="+t):this.$common.navigateTo("/pages/goods/index/pintuan?id="+e)}}};t.goods=n;var s={onBackPress:function(e){if("navigateBack"===e.from)return!1;var t=["/pages/cart/index/index","/pages/member/index/index"],i=this.$store.state.redirectPage;return t.indexOf(i)>-1?(this.$store.commit({type:"redirect",page:""}),uni.switchTab({url:"/pages/index/index"}),!0):void 0},backBtn:function(){var e=getCurrentPages();e.length>1?uni.navigateBack({delta:1}):uni.switchTab({url:"/pages/index/index"})}};t.goBack=s;var o={methods:{handleBack:function(){var e=this.$store.state.redirectPage;console.log(e),this.$store.commit({type:"redirect",page:""});var t=["/pages/index/index","/pages/member/index/index"];t.indexOf(e)>-1?uni.switchTab({url:e}):e?uni.redirectTo({url:e}):uni.switchTab({url:"/pages/index/index"})}}};t.jumpBackPage=o;var r={methods:{checkIsLogin:function(){uni.showToast({title:"请先登录！",icon:"none",duration:800,success:function(e){setTimeout((function(){uni.hideToast(),uni.navigateTo({url:"/pages/login/login/index1"})}),200)}})}}};t.checkLogin=r;var c={methods:{setBarTitle:function(e){uni.setNavigationBarTitle({title:this.$t("".concat(e))})},copyData:function(e){var t=this;uni.setClipboardData({data:e,success:function(){t.$common.errorToShow("复制成功")}})},previewImage:function(e,t){uni.previewImage({current:t||0,urls:e,indicator:"default"})},savePoster:function(){var e=this;e.downloadIamge(e.poster,"image")},downloadIamge:function(e,t){var i=new Image;i.setAttribute("crossorigin","anonymous"),i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var a=e.getContext("2d");a.drawImage(i,0,0,i.width,i.height);var n=e.toDataURL("image/png"),s=document.createElement("a"),o=new MouseEvent("click");s.download=t||"photo",s.href=n,s.dispatchEvent(o)},i.src=e},downloadImageOfMp:function(e){}}};t.tools=c;var d={methods:{action:function(e,t){if(t)if(1==e)if(-1!=t.indexOf("http"))window.location.href=t;else{if("/pages/index/index"==t||"/pages/classify/classify"==t||"/pages/cart/index/index"==t||"/pages/me/index"==t)return void uni.switchTab({url:t});if(!(t.indexOf("/pages/coupon/coupon")>-1))return void navigateTo(t);var i=t.replace("/pages/coupon/coupon?id=","");this.receiveCoupon(i)}else 2==e?this.goodsDetail(t):3==e?this.$common.navigateTo("/pages/article/index?id="+t+"&id_type=1"):4==e?this.$common.navigateTo("/pages/article/list?cid="+t):5==e&&this.$common.navigateTo("/pages/form/detail/form?id="+t)},receiveCoupon:function(e){var t=this,i={promotion_id:e};this.$api.getCoupon(i,(function(e){e.status?t.$common.successToShow(e.msg):t.$common.errorToShow(e.msg)}))},goodsDetail:function(e){var t="/pages/goods/index/index?id="+e;navigateTo(t)}}};t.clickUrl=d;var l={data:function(){return{msgList:[{name:"下单通知",desc:"商城下单成功后通知我",func:"order",tmpl:"",status:!1},{name:"支付通知",desc:"订单支付后通知我",func:"pay",tmpl:"",status:!1},{name:"待付通知",desc:"未支付订单取消前通知我",func:"cancel",tmpl:"",status:!1},{name:"发货通知",desc:"订单发货后通知我",func:"ship",tmpl:"",status:!1},{name:"售后通知",desc:"订单售后结果通知我",func:"after_sale",tmpl:"",status:!1},{name:"退款通知",desc:"售后退款结果通知我",func:"refund",tmpl:"",status:!1}]}},methods:{getSubscriptionTmplIds:function(e){var t=this;this.$api.getSubscriptionTmplIds({type:e},(function(e){if(e.status){console.log("res.statue",e);for(var i=0;i<t.msgList.length;i++)e.data[t.msgList[i].func]&&(t.msgList[i].tmpl=e.data[t.msgList[i].func].template_id,""!=t.msgList[i].tmpl&&(t.msgList[i].status=!0))}}))},subAction:function(e){"function"==typeof e&&e()}}};t.subscription=l},"203a":function(e,t,i){"use strict";i("4de4"),i("4160"),i("a9e3"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("94b4"),n={props:{orderId:{type:String,default:function(){return""}},recharge:{type:Number,default:function(){return 0}},uid:{type:Number,default:function(){return 0}},type:{type:Number,default:function(){return 1}}},data:function(){return{payments:[],openid:"",popShow:!1,payStatus:!0}},mounted:function(){this.getPayments()},methods:{getPayments:function(){var e=this;this.$api.paymentList({},(function(t){t.status&&(e.payments=e.formatPayments(t.data))}))},formatPayments:function(e){var t=this;return this.$common.isWeiXinBrowser()&&(e=e.filter((function(e){return"alipay"!==e.code}))),2===this.type&&(e=e.filter((function(e){return"balancepay"!==e.code||1===e.is_online}))),e.forEach((function(e){t.$set(e,"icon","/static/image/"+e.code+".png")})),e},checkWXJSBridge:function(e){var t=this,i=setInterval((function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(i),t.onBridgeReady(e))}),200)},onBridgeReady:function(e){var t=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appid,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(i){"get_brand_wcpay_request:ok"===i.err_msg?t.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===i.err_msg?t.$common.errorToShow("取消支付"):t.$common.errorToShow("支付失败"),setTimeout((function(){t.$common.redirectTo("/pages/goods/payment/result?id="+e.payment_id)}),1e3)}))},toPayHandler:function(e){var t=this;this.popShow=!0;var i={payment_code:e,payment_type:this.type};switch(i["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,e){case"alipay":1==this.type&&this.orderId?i["params"]={trade_type:"WAP",return_url:a.baseUrl+"wap/pages/goods/payment/result"}:2==this.type&&this.recharge?i["params"]={money:this.recharge,return_url:a.baseUrl+"wap/pages/goods/payment/result"}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,(function(e){if(e.status){var i=e.data.url,a=e.data.data,n=document.createElement("form");n.id="aliPay",n.methods="post",n.action=i,n.target="_self";var s=[];for(var o in a)s[o]=document.createElement("input"),s[o].type="hidden",s[o].name=o,s[o].value=a[o],n.appendChild(s[o]);n.addEventListener("submit",(function(){}),!1),document.body.appendChild(n),n.dispatchEvent(new Event("submit")),n.submit(),document.body.removeChild(n)}else t.$common.errorToShow(e.msg)}));break;case"wechatpay":if(0==this.payStatus)return;this.payStatus=!1;var n=this,s=this.$common.isWeiXinBrowser();if(s){var o=a.baseUrl+"wap/pages/goods/payment/auth?order_id="+this.orderId+"&type="+this.type;1==this.type&&this.orderId?i["params"]={trade_type:"JSAPI_OFFICIAL",url:o}:2==this.type&&this.recharge?i["params"]={trade_type:"JSAPI_OFFICIAL",money:this.recharge,url:o+"&uid="+this.uid+"&money="+this.recharge}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId,trade_type:"JSAPI_OFFICIAL",url:o}),this.$api.pay(i,(function(e){if(e.status||"10066"!=e.data)if(e.status){var i=e.data;t.checkWXJSBridge(i)}else t.$common.errorToShow(e.msg);else window.location.href=e.msg}))}else 1==this.type&&this.orderId?i["params"]={trade_type:"MWEB",return_url:a.baseUrl+"wap/pages/goods/payment/result"}:2==this.type&&this.recharge?i["params"]={trade_type:"MWEB",money:this.recharge,return_url:a.baseUrl+"wap/pages/goods/payment/result"}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId,trade_type:"MWEB",return_url:a.baseUrl+"wap/pages/goods/payment/result"}),this.$api.pay(i,(function(e){n.payStatus=!0,e.status?location.href=e.data.mweb_url:t.$common.errorToShow(e.msg)}));break;case"balancepay":5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,(function(e){e.status?t.$common.redirectTo("/pages/goods/payment/result?id="+e.data.payment_id):t.$common.errorToShow(e.msg)}));break;case"offline":this.$common.modelShow("线下支付说明","请联系客服进行线下支付",(function(){}),!1,"取消","确定");break}},popBtn:function(){this.popShow=!1}}};t.default=n},"2bd8":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"cell-group margin-cell-group"},[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("订单类型")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[1==e.type?i("v-uni-text",{staticClass:"cell-ft-p"},[e._v("商品订单")]):e._e(),2==e.type?i("v-uni-text",{staticClass:"cell-ft-p",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRecharge()}}},[e._v("充值订单")]):e._e(),5==e.type?i("v-uni-text",{staticClass:"cell-ft-p"},[e._v("快捷下单")]):e._e(),6==e.type?i("v-uni-text",{staticClass:"cell-ft-p"},[e._v("付款码")]):e._e()],1)],1),1==e.type?i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item flex-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("订单编号")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},e._l(e.orderInfo.rel,(function(t,a){return i("v-uni-view",{key:a,staticClass:"cell-ft-p",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.orderDetail(t.source_id)}}},[e._v(e._s(t.source_id||""))])})),1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("支付金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[e._v("￥"+e._s(e.orderInfo.money||""))])],1)],1)],1):2==e.type?i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("充值金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[e._v("￥ "+e._s(e.recharge||""))])],1)],1)],1):i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("支付金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[e._v("￥ "+e._s(e.recharge||""))])],1)],1)],1)],1),i("payments-by-h5",{attrs:{orderId:e.orderId,recharge:e.recharge,type:e.type,uid:e.userInfo.id}})],1)},s=[]},"31f2":function(e,t,i){"use strict";var a=i("1460"),n=i.n(a);n.a},"6f39":function(e,t,i){"use strict";i.r(t);var a=i("2bd8"),n=i("f716");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("a22c");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"1d8ebe72",null,!1,a["a"],o);t["default"]=c.exports},"7c33":function(e,t,i){"use strict";i.r(t);var a=i("203a"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},a22c:function(e,t,i){"use strict";var a=i("c5dd"),n=i.n(a);n.a},a3c5:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"cell-group payment-method"},e._l(e.payments,(function(t){return 2!=e.type||"balancepay"!=t.code?i("v-uni-view",{key:t.code,staticClass:"cell-item add-title-item cell-item-mid right-img",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.toPayHandler(t.code)}}},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-image",{staticClass:"cell-hd-icon",attrs:{src:t.icon}})],1),i("v-uni-view",{staticClass:"cell-item-bd cell-item-bd-block"},[i("v-uni-view",{staticClass:"cell-bd-view"},[i("v-uni-text",{staticClass:"cell-bd-text"},[e._v(e._s(t.name))])],1),i("v-uni-view",{staticClass:"cell-bd-view"},[i("v-uni-text",{staticClass:"cell-bd-text address"},[e._v(e._s(t.memo))])],1)],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})],1)],1):e._e()})),1)},s=[]},c5dd:function(e,t,i){var a=i("cd76");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("2f4f3c83",a,!0,{sourceMap:!1,shadowMode:!1})},c644:function(e,t,i){"use strict";var a=i("4ea4");i("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("ccca")),s=i("19d5"),o={mixins:[s.orders],data:function(){return{orderId:0,recharge:0,type:1,orderInfo:{},userInfo:{},form_id:0}},components:{paymentsByH5:n.default},onLoad:function(e){this.orderId=e.order_id,this.recharge=Number(e.recharge),this.type=Number(e.type),this.form_id=Number(e.form_id),this.orderId&&1==this.type?this.getOrderInfo():this.recharge&&2==this.type?this.getUserInfo():!this.form_id||5!=this.type&&6!=this.type?this.$common.errorToShow("订单支付参数错误",(function(){uni.navigateBack({delta:1})})):this.orderId=""+this.form_id},methods:{getOrderInfo:function(){var e=this,t={ids:this.orderId,payment_type:this.type};this.$api.paymentsCheckpay(t,(function(t){t.status&&(e.orderInfo=t.data)}))},getUserInfo:function(){var e=this;this.$api.userInfo({},(function(t){t.status?e.userInfo=t.data:e.$common.errorToShow(t.msg)}))},toRecharge:function(){this.$common.navigateTo("/pages/member/balance/index")}}};t.default=o},ccca:function(e,t,i){"use strict";i.r(t);var a=i("a3c5"),n=i("7c33");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("31f2");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"28783a64",null,!1,a["a"],o);t["default"]=c.exports},cd76:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".margin-cell-group[data-v-1d8ebe72]{margin-bottom:%?20?%}.cell-hd-title[data-v-1d8ebe72]{color:#999}.payment-method .cell-item-hd[data-v-1d8ebe72]{min-width:%?70?%}.payment-method .cell-hd-icon[data-v-1d8ebe72]{width:%?70?%;height:%?70?%}.payment-method .cell-item-bd[data-v-1d8ebe72]{border-left:%?2?% solid #f0f0f0;padding-left:%?30?%}.payment-method .cell-bd-text[data-v-1d8ebe72]{font-size:%?28?%;color:#666}.payment-method .address[data-v-1d8ebe72]{font-size:%?24?%;color:#999}.flex-item[data-v-1d8ebe72]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-item .cell-item-ft[data-v-1d8ebe72]{position:relative;top:0;-webkit-transform:translateY(0);transform:translateY(0);right:0}",""]),e.exports=t},f716:function(e,t,i){"use strict";i.r(t);var a=i("c644"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a}}]);