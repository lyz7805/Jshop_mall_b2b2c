<style>
    .layui-form-item label {
        width: 120px;
    }
    .classifyimg{
        margin-bottom: 20px;
        width: 672px !important;
    }
    .classifyimg-item{
        display: inline-block;
        width: 140px;
    }
    .classifyimg img{
        width: 100px;
        display: block;
    }
    .classifyimg .layui-form-radio{
        vertical-align: top;
        display: block;
        margin-bottom: 10px;
    }
    .image_storage_type .item{
        display: none;
    }
</style>
<div class="layui-card" style="padding:10px;">
    {:jshopToken('setting_save')}
    <div class="layui-tab" lay-filter="setting">
        <ul class="layui-tab-title">
            <li lay-id="platform" class="layui-this">店铺设置</li>
            <li lay-id="share">分享设置</li>
            <li lay-id="users">会员设置</li>
            <li lay-id="goods">商品设置</li>
            <li lay-id="order">订单管理</li>
        </ul>
        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <form class="layui-form seller-alone-form" action="" method="post">
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['shop_name']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            <div class="layui-form-mid layui-text">{$shop['name']}</div>
                        </div>
                        <div class="layui-form-mid layui-word-aux"></div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['shop_desc']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5" style="margin-bottom: 10px">
                            <textarea name="shop_desc" class="layui-textarea">{$data['shop_desc']['value']}</textarea>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['about_article_id']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5" style="margin-bottom: 10px">
                            <input type="text" id="about_article" name="about_article" readonly="readonly" value="{$data['about_article']['value']}" required placeholder="请选择广告文章" autocomplete="off" class="layui-input" onclick="article_list('article_id', 'about_article')">
                            <input type="hidden" id="article_id" name="about_article_id" value="{$data['about_article_id']['value']}">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['shop_logo']['name']}：</label>
                        <div class="layui-input-inline seller-inline-6">
                            {Jshop:image id='shop_logo' value="$data['shop_logo']['value']" name="shop_logo"/}
                        </div>
                        <div class="layui-form-mid layui-word-aux"></div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['shop_default_image']['name']}：</label>
                        <div class="layui-input-inline seller-inline-6">
                            {Jshop:image id='shop_default_image' value="$data['shop_default_image']['value']" name="shop_default_image"/}
                        </div>
                        <div class="layui-form-mid layui-word-aux">系统默认图</div>
                    </div>

<!--                    <div class="layui-form-item">-->
<!--                        <label class="layui-form-label">{$data['store_switch']['name']}：</label>-->
<!--                        <div class="layui-input-inline seller-inline-7">-->
<!--                            <input type="radio" lay-filter="store_switch" name="store_switch" value="1" title="开启" {eq name="$data['store_switch']['value']" value="1" }checked{/eq}>-->
<!--                            <input type="radio" lay-filter="store_switch" name="store_switch" value="2" title="不开启" {eq name="$data['store_switch']['value']" value="2" }checked{/eq}>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="layui-form-item">-->
<!--                        <label class="layui-form-label">{$data['invoice_switch']['name']}：</label>-->
<!--                        <div class="layui-input-inline seller-inline-7">-->
<!--                            <input type="radio" lay-filter="invoice_switch" name="invoice_switch" value="1" title="开启" {eq name="$data['invoice_switch']['value']" value="1" }checked{/eq}>-->
<!--                            <input type="radio" lay-filter="invoice_switch" name="invoice_switch" value="2" title="不开启" {eq name="$data['invoice_switch']['value']" value="2" }checked{/eq}>-->
<!--                        </div>-->
<!--                    </div>-->

                    <div class="layui-form-item" style="margin-top: 20px;">
                        <label class="layui-form-label">{$data['recommend_keys']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            <input type="text" name="recommend_keys" value="{$data['recommend_keys']['value']}" lay-verify="title" autocomplete="off" placeholder="搜索发现关键字" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">多个【搜索发现】关键字请用空格分割</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['cate_style']['name']}：</label>
                        <div class="layui-input-inline seller-inline-12 classifyimg">
                            <div class="classifyimg-item">
                            	<input type="radio" lay-filter="cate_style" name="cate_style" value="1" title="一级大图" {eq name="$data['cate_style']['value']" value="1" }checked{/eq}>
                                <img src="__STATIC__images/one-big.png" onclick="viewImage('__STATIC__images/one-big.png')">
                            </div>

                            <div class="classifyimg-item">
                            	<input type="radio" lay-filter="cate_style" name="cate_style" value="2" title="一级小图" {eq name="$data['cate_style']['value']" value="2" }checked{/eq}>
                                <img src="__STATIC__images/one-small.png" onclick="viewImage('__STATIC__images/one-small.png')">
                            </div>

                            <div class="classifyimg-item">
                            	<input type="radio" lay-filter="cate_style" name="cate_style" value="3" title="二级小图" {eq name="$data['cate_style']['value']" value="3" }checked{/eq}>
                                <img src="__STATIC__images/two-small.png" onclick="viewImage('__STATIC__images/two-small.png')">
                            </div>
                            <div class="layui-form-mid layui-word-aux list-tag">
                                1、一级大图分类图标尺寸建议：350px*150px<br/>
                                2、一级小图分类图标尺寸建议：105px*105px<br/>
                                3、二级分类图标尺寸建议：60px*60px<br/>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">&nbsp;</label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="save" style="height: 37px;padding: 0 27px;font-size: 14px;">保存</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="layui-tab-item">
                <form class="layui-form seller-alone-form" action="" method="post">
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['share_title']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            <input type="text" name="share_title" value="{$data['share_title']['value']}" lay-verify="title" autocomplete="off" placeholder="请输入分享的标题" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">微信小程序首页分享的标题</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['share_desc']['name']}：</label>
                        <div class="layui-input-inline seller-inline-7">
                            <input type="text" name="share_desc" value="{$data['share_desc']['value']}" lay-verify="title" autocomplete="off" placeholder="请输入分享的描述" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">只在支付宝小程序分享中显示</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['share_image']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            {Jshop:image id='share_image' value="$data['share_image']['value']" name="share_image"/}
                        </div>
                        <div class="layui-form-mid layui-word-aux">微信小程序首页分享的图片</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">&nbsp;</label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="save" style="height: 37px;padding: 0 27px;font-size: 14px;">保存</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="layui-tab-item">
                <form class="layui-form seller-alone-form" action="" method="post">
                    <div class="layui-form-item" style="margin-top: 20px;">
                        <label class="layui-form-label">{$data['shop_mobile']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            <input type="text" name="shop_mobile" value="{$data['shop_mobile']['value']}" lay-verify="title" autocomplete="off" placeholder="请输入接收通知手机号" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">前台下单时给商家发送短信通知</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">&nbsp;</label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="save" style="height: 37px;padding: 0 27px;font-size: 14px;">保存</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="layui-tab-item">
                <form class="layui-form seller-alone-form" action="" method="post">
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['goods_stocks_warn']['name']}：</label>
                        <div class="layui-input-inline seller-inline-2">
                            <input type="text" name="goods_stocks_warn" value="{$data['goods_stocks_warn']['value']}" lay-verify="title" autocomplete="off" placeholder="数量" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">商品中只要有货品库存低于报警数量，就会在后台提示</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['goods_show_word1']['name']}：</label>
                        <div class="layui-input-inline seller-inline-3">
                            <input type="text" name="goods_show_word1" value="{$data['goods_show_word1']['value']}" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">手机端商品详情页说明文字1</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['goods_show_word2']['name']}：</label>
                        <div class="layui-input-inline seller-inline-3">
                            <input type="text" name="goods_show_word2" value="{$data['goods_show_word2']['value']}" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">手机端商品详情页说明文字2</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">&nbsp;</label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="save" style="height: 37px;padding: 0 27px;font-size: 14px;">保存</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="layui-tab-item">
                <form class="layui-form seller-alone-form" action="" method="post">
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['reship_name']['name']}：</label>
                        <div class="layui-input-inline seller-inline-3">
                            <input type="text" name="reship_name" value="{$data['reship_name']['value']}" lay-verify="title" autocomplete="off" placeholder="收货人名称" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">用户退货时的收货人姓名</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['reship_mobile']['name']}：</label>
                        <div class="layui-input-inline seller-inline-3">
                            <input type="text" name="reship_mobile" value="{$data['reship_mobile']['value']}" lay-verify="title" autocomplete="off" placeholder="收货人手机号码" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">用户退货时的收货人联系方式</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['reship_area_id']['name']}：</label>
                        <div class="layui-input-inline seller-inline-4 address-class">
                            {Jshop:area name='reship_area_id' value="data['reship_area_id']['value']" class="select-address" /}
                        </div>
                        <div class="layui-form-mid layui-word-aux">退货的邮寄地区</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">{$data['reship_address']['name']}：</label>
                        <div class="layui-input-inline seller-inline-5">
                            <input type="text" name="reship_address" value="{$data['reship_address']['value']}" lay-verify="title" autocomplete="off" placeholder="退货地址" class="layui-input">
                        </div>
                        <div class="layui-form-mid layui-word-aux">退货的详细地址</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">&nbsp;</label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="save" style="height: 37px;padding: 0 27px;font-size: 14px;">保存</button>
                        </div>
                    </div>

                </form>
            </div>

        </div>
    </div>
</div>

<script>
    layui.use(['form', 'element', 'table'], function() {
        var form = layui.form, element = layui.element, table = layui.table;

        //显示当前tab
        if (location.hash) {
            element.tabChange('setting', location.hash.replace(/^#/, ''));
        }
        element.on('tab(setting)', function () {
            var othis = $(this), layid = othis.attr('lay-id');
            if (layid) {
                location.hash = layid;
            }
        });

        //保存商品
        form.on('submit(save)', function(data) {
            formData = data.field;
            if (!formData) {
                layer.msg('请先完善数据', {
                    time: 1300
                }); //layer.msg(JSON.stringify(data.field));
                return false;
            }
            JsPost('{:url("Setting/index")}',formData,function(e){
                if (e.status === true) {
                    layer.msg('保存成功',{
                        time: 1300
                    },function(){
                        window.location.reload();
                    });
                } else {
                    layer.msg(e.msg, {
                        time: 1300
                    });
                }
            });
            return false;
        });

        //监听文章列表页工具条
        table.on('tool(articleTable)', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
            var data = obj.data; //获得当前行数据
            var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
            var tr = obj.tr; //获得当前行 tr 的DOM对象
            if(layEvent === 'selectArticle'){ //选择
                var article_id_key = $("#article_id_key").val();
                var article_name_key = $("#article_name_key").val();
                $("#"+article_id_key).val(data.id);
                $("#"+article_name_key).val(data.title);
                layer.close(window.box);
            }
        });
    });

    function article_list(id, name)
    {
        JsGet("{:url('Carousel/getArticle')}?article_id_key="+id+"&article_name_key="+name,function(e){
            window.box = layer.open({
                type: 1,
                content: e,
                area: setpage(700,450),
                title:'文章列表'
            });
        });
    }
</script>